<div class="container">
    <form #f="ngForm" (ngSubmit)="onSubmit(f)">
        <div class="row">
            <div class="form-group col-md-12">
                <label for="nome">Nome</label>
                <input type="text"
                    [ngClass]="verificarValidTouched(nome) ? 'form-control is-invalid' : 'form-control'"
                class="form-control" id="nome" placeholder="Nome" name="nome" [(ngModel)]="usuario.nome"
                    required #nome="ngModel">
                <app-campo-control-erro [mostrarErro]="verificarValidTouched(nome, 'required')" msgErro="Nome é obrigatório" [erroNaoRequired]="true" ></app-campo-control-erro>
            </div>

            <div class="form-group col-md-12">
                <label for="email">Email</label>
                <input type="email" 
                    [ngClass]="verificarValidTouched(email) ? 'form-control is-invalid' : 'form-control'"
                    id="email" placeholder="nome@email.com" name="email" [(ngModel)]="usuario.email"
                    required
                    email #email="ngModel">
                <app-campo-control-erro [mostrarErro]="verificarValidTouched(email, 'required')" msgErro="E-mail é obrigatório" [erroNaoRequired]="true" ></app-campo-control-erro>
                <app-campo-control-erro [mostrarErro]="verificarValidTouched(email, 'email')" msgErro="E-mail é inválido" [erroNaoRequired]="false" ></app-campo-control-erro>
            </div>
        </div>
        


        <div ngModelGroup="endereco">
            <div class="row">
                <div class="form-group col-md-4">
                    <label for="cep">CEP</label>
                    <input type="text" 
                        [ngClass]="verificarValidTouched(cep) ? 'form-control is-invalid' : 'form-control'"
                        id="cep" placeholder="cep" name="cep" [(ngModel)]="usuario.cep" (blur)="consultaCEP($any($event.target).value, f)"
                        required
                        #cep="ngModel">
                    <app-campo-control-erro [mostrarErro]="verificarValidTouched(cep, 'required')" [msgErro]="'CEP é inválido'" [erroNaoRequired]="true" ></app-campo-control-erro>
                </div>
    
                <div class="form-group col-md-4">
                    <label for="numero">Número</label>
                    <input type="text" 
                        [ngClass]="verificarValidTouched(numero) ? 'form-control is-invalid' : 'form-control'"
                        id="numero" placeholder="numero" name="numero" [(ngModel)]="usuario.numero"
                        required
                        #numero="ngModel">
                    <app-campo-control-erro [mostrarErro]="verificarValidTouched(numero, 'required')" [msgErro]="'Número é inválido'" [erroNaoRequired]="true" ></app-campo-control-erro>
                </div>
    
                <div class="form-group col-md-4">
                    <label for="complemento">Complemento</label>
                    <input type="text" 
                        [ngClass]="verificarValidTouched(complemento) ? 'form-control is-invalid' : 'form-control'"
                        id="complemento" placeholder="complemento" name="complemento" [(ngModel)]="usuario.complemento"
                        required
                        #complemento="ngModel">
                    <app-campo-control-erro [mostrarErro]="verificarValidTouched(complemento, 'required')" [msgErro]="'Complemento é inválido'" [erroNaoRequired]="true" ></app-campo-control-erro>
                </div>
            </div>
    
            <div class="row">
                <div class="form-group col-md-12">
                    <label for="rua">Rua</label>
                    <input type="text"
                        class="form-control readonly" id="rua" placeholder="rua" name="rua" [(ngModel)]="usuario.rua"
                        #rua="ngModel" readonly required>
                    <app-campo-control-erro [mostrarErro]="verificarValidTouched(rua, 'required')" [msgErro]="'Rua é inválido'" [erroNaoRequired]="true" ></app-campo-control-erro>
                </div>                
            </div>
    
            <div class="row">
                <div class="form-group col-md-5">
                    <label for="bairro">Bairro</label>
                    <input type="text"
                        class="form-control readonly" id="bairro" placeholder="bairro" name="bairro" [(ngModel)]="usuario.bairro"
                        #bairro="ngModel" readonly required>
                    <app-campo-control-erro [mostrarErro]="verificarValidTouched(bairro, 'required')" [msgErro]="'Bairro é inválido'" [erroNaoRequired]="true" ></app-campo-control-erro>
                </div>
                
                <div class="form-group col-md-4">
                    <label for="cidade">Cidade</label>
                    <input type="text"
                        class="form-control readonly" id="cidade" placeholder="cidade" name="cidade" [(ngModel)]="usuario.cidade"
                        #cidade="ngModel" readonly required>
                    <app-campo-control-erro [mostrarErro]="verificarValidTouched(cidade, 'required')" [msgErro]="'Bairro é inválido'" [erroNaoRequired]="true" ></app-campo-control-erro>
                </div>
    
                <div class="form-group col-md-3">
                    <label for="estado">Estado</label>
                    <input type="text"
                        class="form-control readonly" id="estado" placeholder="estado" name="estado" [(ngModel)]="usuario.estado"
                        #estado="ngModel" readonly required>
                    <app-campo-control-erro [mostrarErro]="verificarValidTouched(estado, 'required')" [msgErro]="'Estado é inválido'" [erroNaoRequired]="true" ></app-campo-control-erro>
                </div>
            </div>
    
            <div style="margin-top: 15px;">
                <button type="submit" class="btn btn-primary"
                    [disabled]="!f.valid"
                >
                    Submit
                </button>
            </div>
        </div>

        <app-form-debug [form]="f"></app-form-debug>
    </form>
</div>